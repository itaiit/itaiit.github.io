# 职责链模式

职责链模式实现了请求者和请求处理者的解耦。在职责链模式里，很多对象由每个对象对其下家的引用而连接起来形成一条链，请求会沿着这条链进行传递直到找到能够处理的它节点为止。

需要注意的是职责链模式并不创建职责链，是由客户端来创建职责链。一般的职责链在处理请求的时候，往往会最终找到一个能够处理请求的节点，并且只会有一个节点来处理请求；另外一种职责链是可以有多个节点来处理请求，一个节点处理部分或者处理完整个请求之后，再向下传递。

实现职责链有多种方式：

1. 职责链本身还是一个链式结构，通过使用成员变量在每个节点中保存下一个节点对象的引用；
2. 传统责任链中，每个 Handler 持有对下一个 Handler 的引用（通过 setNext()）。而用 List 实现时，“下一个”的逻辑由外部循环控制，解耦更彻底。在 aop 的应用中就是使用集合来存放所有的切面；

## 典型应用

典型的一个应用是在 spring aop 中，使用 `advisorChainFactory` 创建了一个 advisor 的切面链，其实返回的是一个通知 advice 的集合，而不是通过成员变量来维护的下一个节点的引用。这一步就是我们上面提到的：在责任链模式中不会创建责任链，而是由客户端（也就是调用者）来创建责任链。

比如我有一个zip包，里面有txt，word，excel等类型的文件并对这些文件进行解析获取内容，就可以使用职责链模式，把对于每种类型文件的解析当作是一个职责。